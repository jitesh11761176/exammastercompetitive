# ==============================================
# ExamMaster Pro - Environment Variables
# ==============================================
# Copy this file to .env.local and fill in your actual values
# Never commit .env.local to version control!

# ==============================================
# DATABASE (Neon PostgreSQL - Free Tier Available)
# ==============================================
# Get from: https://neon.tech
# Format: postgresql://[user]:[password]@[hostname]/[database]?sslmode=require
DATABASE_URL="postgresql://user:password@hostname.neon.tech/database?sslmode=require"

# ==============================================
# NEXTAUTH CONFIGURATION
# ==============================================
# For production, use your actual domain
NEXTAUTH_URL="http://localhost:3001"

# Generate a random secret (32+ characters)
# Run: openssl rand -base64 32
# Or visit: https://generate-secret.vercel.app/32
NEXTAUTH_SECRET="generate-a-random-secret-key-here"

# ==============================================
# GOOGLE OAUTH (Free)
# ==============================================
# Get from: https://console.cloud.google.com
# Create OAuth 2.0 credentials
# Add redirect URI: http://localhost:3001/api/auth/callback/google
GOOGLE_CLIENT_ID="your-google-client-id.apps.googleusercontent.com"
GOOGLE_CLIENT_SECRET="GOCSPX-your-google-client-secret"

# ==============================================
# GOOGLE GEMINI AI (Free Tier Available)
# ==============================================
# Get from: https://aistudio.google.com/app/apikey
GEMINI_API_KEY="AIzaSy-your-gemini-api-key"

# ==============================================
# CLOUDINARY (Free Tier Available - Optional)
# ==============================================
# Get from: https://cloudinary.com
# For image uploads and storage
NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME="your-cloud-name"
CLOUDINARY_API_KEY="your-api-key"
CLOUDINARY_API_SECRET="your-api-secret"

# ==============================================
# VERCEL KV (Optional - Production Caching)
# ==============================================
# Get from: Vercel Dashboard → Storage → KV
# Only needed for production caching optimization
KV_URL="your-kv-url"
KV_REST_API_URL="your-kv-rest-api-url"
KV_REST_API_TOKEN="your-kv-rest-api-token"
KV_REST_API_READ_ONLY_TOKEN="your-kv-rest-api-read-only-token"

# ==============================================
# AI & ADVANCED FEATURES
# ==============================================

# OpenAI (for AI chat, question generation, hints)
# Get from: https://platform.openai.com/api-keys
OPENAI_API_KEY="sk-proj-your-openai-api-key"
OPENAI_MODEL="gpt-4o-mini"  # or "gpt-4o" for better quality

# Meilisearch (for fast search)
# Local: http://localhost:7700
# Cloud: https://www.meilisearch.com/cloud
MEILISEARCH_HOST="http://localhost:7700"
MEILISEARCH_API_KEY="your-master-key"

# Web Push Notifications
# Generate with: npx @web-push/vapid generate
VAPID_PUBLIC_KEY="BG..."
VAPID_PRIVATE_KEY="AB..."
VAPID_SUBJECT="mailto:admin@exammaster.com"

# ==============================================
# MONITORING & ERROR TRACKING
# ==============================================

# Sentry (Error monitoring)
# Get from: https://sentry.io
NEXT_PUBLIC_SENTRY_DSN="https://xxxxx@xxxxx.ingest.sentry.io/xxxxx"
SENTRY_AUTH_TOKEN="your-sentry-auth-token"
SENTRY_ORG="your-organization"
SENTRY_PROJECT="your-project"

# ==============================================
# BACKGROUND JOBS & QUEUE
# ==============================================

# Redis (for BullMQ background jobs)
# Option 1: Upstash Cloud (Recommended - Free Tier)
# Get from: https://upstash.com → Create Database
REDIS_URL="rediss://default:YOUR_PASSWORD@YOUR_HOST.upstash.io:6379"
UPSTASH_REDIS_REST_URL="https://YOUR_HOST.upstash.io"
UPSTASH_REDIS_REST_TOKEN="YOUR_TOKEN"

# Option 2: Local Redis (Development only)
# REDIS_URL="redis://localhost:6379"

# Worker configuration
ENABLE_WORKERS="true"
WORKER_CONCURRENCY="5"

# ==============================================
# EMAIL SERVICE
# ==============================================

# Resend (for transactional emails)
# Get from: https://resend.com
RESEND_API_KEY="re_xxxxxxxxxxxxx"
EMAIL_FROM="ExamMaster Pro <noreply@exammaster.com>"

# ==============================================
# PAYMENTS
# ==============================================

# Stripe
# Get from: https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY="sk_test_your-stripe-secret-key"
STRIPE_PUBLISHABLE_KEY="pk_test_your-stripe-publishable-key"
STRIPE_WEBHOOK_SECRET="whsec_your-webhook-secret"

# Razorpay (for Indian users - optional)
# Get from: https://dashboard.razorpay.com
RAZORPAY_KEY_ID="rzp_test_your-key-id"
RAZORPAY_KEY_SECRET="your-razorpay-key-secret"

# ==============================================
# SECURITY
# ==============================================

# Rate limiting
RATE_LIMIT_ENABLED="true"

# CSRF protection
CSRF_ENABLED="true"

# Content Security Policy
CSP_ENABLED="true"

# Cron job secret (for scheduled tasks)
# Generate with: openssl rand -base64 32
CRON_SECRET="your-cron-secret"

# ==============================================
# FEATURE FLAGS
# ==============================================

ENABLE_AI_FEATURES="true"
ENABLE_SEARCH="true"
ENABLE_NOTIFICATIONS="true"
ENABLE_AUDIT_LOGS="true"

# ==============================================
# NOTES
# ==============================================
# 1. Required for basic functionality:
#    - DATABASE_URL, NEXTAUTH_URL, NEXTAUTH_SECRET
#    - GOOGLE_CLIENT_ID, GOOGLE_CLIENT_SECRET
#    - GEMINI_API_KEY
#
# 2. Required for AI features:
#    - OPENAI_API_KEY
#    - MEILISEARCH_HOST, MEILISEARCH_API_KEY
#    - VAPID_PUBLIC_KEY, VAPID_PRIVATE_KEY
#
# 3. Required for production:
#    - REDIS_URL (background jobs)
#    - NEXT_PUBLIC_SENTRY_DSN (error tracking)
#    - RESEND_API_KEY (emails)
#    - STRIPE_SECRET_KEY (payments)
#
# 4. Optional but recommended:
#    - Cloudinary (for image uploads)
#    - Vercel KV (for production caching)
#    - Razorpay (for Indian payments)
#
# 5. For production deployment:
#    - Update NEXTAUTH_URL with your domain
#    - Update Google OAuth redirect URIs
#    - Use strong NEXTAUTH_SECRET and CRON_SECRET
#    - Enable all security features
# ==============================================
